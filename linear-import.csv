"Title","Description","Priority","Labels","Status","Beads ID"
"Fix claims query error for single item","Error in claims query when fetching for single item. Query uses 'in (?)' with single value instead of proper parameterization. Likely in shared-items API or claims lookup. Error: Failed query with sqlite IN clause for single itemId.","High","Bug","Done","giftlist-0c4"
"Notifications & Email","Enable in-app and email notifications for invitation and sharing events. Includes notification storage, Resend email integration, and Cloudflare Queues.","Medium","Feature","Done","giftlist-0mj"
"Database: Notifications Schema","Add notifications table (userId, type, title, body, data JSON, read boolean). Create migration and types.","Medium","Improvement","Done","giftlist-0mj.1"
"Resend Setup","Configure RESEND_API_KEY, create src/lib/email.ts client helper, and invitation email template.","Medium","Improvement","Done","giftlist-0mj.2"
"API: Notifications CRUD","Implement GET /api/notifications, GET unread-count, POST mark-read, POST mark-all-read, DELETE.","Medium","Improvement","Done","giftlist-0mj.3"
"Notification Service","Create src/lib/notifications.ts with createNotification() and sendInvitationEmail() helpers.","Medium","Improvement","Done","giftlist-0mj.4"
"Cloudflare Queue Setup","Add queue binding to wrangler.toml, create queue consumer for async email processing.","Low","Improvement","Backlog","giftlist-0mj.5"
"UI: Notifications Dropdown","NotificationBell with unread badge, NotificationsDropdown with list, mark-as-read on click, mark-all-read action.","Medium","Improvement","Done","giftlist-0mj.6"
"Integration: Invitation Notifications","Trigger notifications on invitation created, accepted, member joined/left. Send email for invitations.","Medium","Improvement","Done","giftlist-0mj.7"
"Apply migrations to production D1","When deploying to production, run: wrangler d1 migrations apply giftlist-db --remote  This applies the groups/notifications schema migrations to the remote D1 database.","High","Improvement","Done","giftlist-1tm"
"Apply database migrations","D1_ERROR: no such table: notifications. Need to run drizzle-kit migrations against local D1 database.","Urgent","Bug","Done","giftlist-1wt"
"User Sync Webhook","Sync Clerk users to D1 on auth events.  ## Steps - Install svix for webhook signature verification - Create /api/webhooks/clerk endpoint using auth adapter - Handle events: user.created, user.updated, user.deleted - Insert/update/delete from users table - Add CLERK_WEBHOOK_SECRET to environment  ## Files - src/pages/api/webhooks/clerk.ts (create - uses auth adapter)  ## Clerk Dashboard Config (do after deploy) - Endpoint: https://<domain>/api/webhooks/clerk - Events: user.created, user.updated, ","High","Improvement","Done","giftlist-23f"
"QuickAdd: fallback to ItemFormDialog on extraction failure","When extract-metadata fails (blocked sites like Amazon, timeouts, etc.), still open ItemFormDialog with URL pre-filled. User can manually enter title/price/image. Even on success, open ItemFormDialog with extracted data so user can edit before saving. Flow: QuickAdd URL input → try extract → open ItemFormDialog with {url, ...extractedData} or just {url} on failure.","Medium","Improvement","Done","giftlist-3bk"
"Personal Wishlist MVP","Create a working vertical slice where users can authenticate and manage their personal wishlist. No sharing, groups, or claims - just the foundation.  ## Scope - User authentication via Clerk (with adapter pattern for future swap) - Database with users and items tables (Drizzle + D1) - CRUD operations for wishlist items - Basic authenticated UI layout - Route: /wishlist  ## Out of Scope (Future Epics) - Groups and invitations - Tagging items with recipients   - Claiming items - Notifications - I","High","Feature","Done","giftlist-4bn"
"Display Images in ItemCard","Show uploaded images in item cards.  ## Steps - Replace gray placeholder with actual image - Fallback to placeholder when no image - Lazy loading for performance - Aspect ratio handling  ## Files - src/components/ItemCard.tsx (modify)  ## Dependencies - Requires: Integrate Upload with Item Form","Medium","Improvement","Done","giftlist-5bx"
"Database Foundation","Set up Drizzle ORM with Cloudflare D1.  ## Steps - Install: drizzle-orm, drizzle-kit, nanoid - Create D1 database: npx wrangler d1 create giftlist-db - Add D1 binding to wrangler.jsonc - Create src/db/schema.ts with users and items tables - Create drizzle.config.ts for D1 - Create src/lib/db.ts for db connection helper  ## Schema ```typescript // users table id: text().primaryKey()  // nanoid clerkId: text().notNull().unique() email: text().notNull() name: text() avatarUrl: text() createdAt: int","High","Improvement","Done","giftlist-5d3"
"Fix TypeScript error in useInvitations.ts","Fix 'error is of type unknown' TypeScript errors at lines 32 and 43 in src/hooks/useInvitations.ts. Need to properly type the error parameter in catch blocks.","Medium","Bug","Done","giftlist-5j0"
"Create Clerk Application","Set up Clerk project and get credentials.  ## Steps - Go to clerk.com and create new application - Choose authentication methods (email, Google, etc.) - Copy API keys for local development - Note the webhook signing secret for later  ## Output needed - PUBLIC_CLERK_PUBLISHABLE_KEY - CLERK_SECRET_KEY - Webhook endpoint URL pattern  ## Dependencies None - this is the first task","High","Improvement","Done","giftlist-5li"
"Fix 500 error on image upload","Upload fails with 500 error when trying to add image. Debug POST /api/upload endpoint.","High","Bug","Done","giftlist-66m"
"Purchase giftlist.app domain on Cloudflare Registrar","1. Cloudflare Dashboard → Register domains 2. Search for giftlist.app 3. Purchase (at-cost pricing, ~$10-15/year for .app) 4. Enter registrant contact details 5. Complete payment  Domain auto-added as Cloudflare zone. Then connect to Workers via Triggers → Add Custom Domain.","High","Improvement","Done","giftlist-68p"
"Add/Edit Item Dialog","Form for creating and editing items.  ## Steps - Add shadcn components: Dialog, Input, Label, Textarea - Form fields: name (required), url, price, notes - Client-side validation matching API schemas - Submit to API endpoints - Optimistic updates or refetch on success - Loading and error states - Install TanStack Query for data fetching  ## Files - src/components/ui/dialog.tsx (add via shadcn) - src/components/ui/input.tsx (add via shadcn) - src/components/ui/label.tsx (add via shadcn) - src/comp","Medium","Improvement","Done","giftlist-6dc"
"Set up automated deployment on merge to main","","Medium","Improvement","Done","giftlist-6vt"
"Image Upload API","POST /api/upload endpoint for image uploads.  ## Steps - Create upload endpoint accepting multipart/form-data - Validate file type (jpg, png, webp, gif) and size (max 5MB) - Generate unique filename with nanoid - Upload to R2 bucket - Return public URL - Auth required  ## Files - src/pages/api/upload.ts (create) - src/lib/validations/upload.ts (create)  ## Dependencies - Requires: R2 Bucket Setup","Medium","Improvement","Done","giftlist-7mx"
"Internationalization (i18n) - English + Ukrainian","Add multi-language support using Paraglide.js with Astro 5 i18n routing. English as default (no URL prefix), Ukrainian with /uk/ prefix. AI-generated translations initially.","Medium","Feature","Done","giftlist-8qv"
"Set up Paraglide.js and Astro i18n configuration","Install @inlang/paraglide-astro and @inlang/paraglide-js. Create project.inlang/settings.json with en/uk language tags. Update astro.config.mjs with Paraglide integration and i18n routing config (prefixDefaultLocale: false).","High","Improvement","Done","giftlist-8qv.1"
"Migrate SharedPage and SharedItemCard to i18n","Update src/components/SharedPage.tsx and SharedItemCard.tsx. Replace: page title, filter dropdown, empty states (both global and per-group), group selector, claim status text.","Medium","Improvement","Done","giftlist-8qv.10"
"Migrate Header and navigation to i18n","Update src/components/Header.tsx. Replace navigation link text (My Wishlist, Shared With Me, Groups). Add locale prop for language switcher integration. Update mobile menu text.","Medium","Improvement","Done","giftlist-8qv.11"
"Migrate NotificationBell and InvitationsDropdown to i18n","Update src/components/NotificationBell.tsx and InvitationsDropdown.tsx. Replace: dropdown titles, empty states, mark all read button, time ago text, invitation actions (Accept/Decline), expiration text.","Medium","Improvement","Done","giftlist-8qv.12"
"Migrate ClaimButton and PartialClaimDialog to i18n","Update src/components/ClaimButton.tsx and PartialClaimDialog.tsx. Replace: claim/release buttons, claimed by text, partial claim dialog content, amount input labels.","Medium","Improvement","Done","giftlist-8qv.13"
"Internationalize Zod validation messages","Create src/i18n/zod-messages.ts with message key resolution. Update src/lib/validations/*.ts (item, group, invitation, claim) to use message keys instead of hardcoded strings. Update form error displays to resolve keys at render time.","Medium","Improvement","Done","giftlist-8qv.14"
"Create LanguageSwitcher component","Create src/components/LanguageSwitcher.tsx using shadcn Select. Display current language with flag emoji. Generate locale-aware URLs on switch (getLocalizedPath helper). Use window.location.href for full page navigation to ensure SSR with new locale.","Medium","Improvement","Done","giftlist-8qv.15"
"Generate Ukrainian translations","Create messages/uk.json with AI-generated Ukrainian translations for all ~150-200 strings. Review for accuracy, especially: UI terminology, date/time phrases, formal vs informal tone, proper noun handling.","Low","Improvement","Done","giftlist-8qv.16"
"Internationalize email templates","Update src/lib/email.ts to accept locale parameter. Add email-related messages to translation files. Generate localized HTML email content for invitation emails. Test email rendering in both locales.","Low","Improvement","Done","giftlist-8qv.17"
"Test i18n implementation end-to-end","Verify: all routes work in both locales, no hydration mismatches, language switcher persists correctly, date/number formatting matches locale, validation errors display in correct language, SEO alternate links present.","Low","Improvement","Backlog","giftlist-8qv.18"
"Migrate MyClaimsSection to i18n","MyClaimsSection.tsx has hardcoded strings that need i18n. Missing translations: 'My Claims', 'new item', 'Partial claim', 'Full claim', 'View product', 'Release', 'Releasing...', 'No active claims', 'Items you claim from friends will appear here', '(partial of X)', 'Unknown'. Some keys exist in messages/en.json but component doesn't use them.","High","Bug","Done","giftlist-8qv.19"
"Create translation message file structure","Create messages/en.json with organized translation keys by domain (common, auth, nav, wishlist, item, groups, claims, notifications, invitations, roles, shared, time, validation, errors, email, landing). Establish naming convention: {domain}_{action} (e.g., wishlist_addItem).","High","Improvement","Done","giftlist-8qv.2"
"Fix price formatting - use locale-aware currency, not translation","Update formatPrice in src/lib/utils.ts to use Intl.NumberFormat with locale parameter. Example: new Intl.NumberFormat(locale, { style: 'currency', currency: 'USD' }).format(cents/100). For en-US: $1,234.56. For uk-UA: 1 234,56 USD. Pass locale from useLocale() hook to formatPrice calls.","High","Bug","Done","giftlist-8qv.20"
"Create LocaleProvider React context","Create src/i18n/LocaleContext.tsx with LocaleProvider component and useLocale hook. Provider sets Paraglide languageTag and provides locale to React component tree. Essential for SSR hydration - locale passed from Astro to React as prop.","High","Improvement","Done","giftlist-8qv.3"
"Update page routing for locale prefixes","Restructure src/pages/ to support locale routing. Create [...locale]/ directory for prefixed routes. Update each page to get locale from languageTag() and pass to React components. Pages: index, wishlist, groups, groups/[id], shared.","High","Improvement","Done","giftlist-8qv.4"
"Update AppLayout with dynamic lang attribute","Modify src/layouts/AppLayout.astro to use languageTag() for dynamic html lang attribute. Add SEO alternate language links in head. Pass locale and currentPath to Header component for language switcher.","Medium","Improvement","Done","giftlist-8qv.5"
"Create locale-aware formatting utilities","Create src/i18n/formatting.ts with formatPrice(), formatDate(), formatShortDate(), formatRelativeTime(), getExpirationText(). Map language tags to BCP 47 locales (en->en-US, uk->uk-UA). Support UAH currency for Ukrainian locale.","Medium","Improvement","Done","giftlist-8qv.6"
"Migrate WishlistPage component to i18n","Update src/components/WishlistPage.tsx as the proof-of-concept migration. Wrap with LocaleProvider, import messages from @/paraglide/messages, replace all hardcoded strings. Includes: title, empty state, add item button, item card text.","Medium","Improvement","Done","giftlist-8qv.7"
"Migrate ItemCard and ItemFormDialog to i18n","Update src/components/ItemCard.tsx and src/components/ItemFormDialog.tsx. Replace: dialog titles/descriptions, form labels/placeholders, button text, price formatting, confirmation messages, aria-labels.","Medium","Improvement","Done","giftlist-8qv.8"
"Migrate GroupsPage and GroupFormDialog to i18n","Update src/components/GroupsPage.tsx, GroupCard.tsx, GroupFormDialog.tsx, GroupDetailPage.tsx. Replace: page title, empty states, create group dialog, member management text, role badges, invitation UI.","Medium","Improvement","Done","giftlist-8qv.9"
"Claims & Reservations","Complete claims system to prevent duplicate gift purchases. Includes claim/unclaim, visibility rules, sync/cascade effects, notifications, claim expiration, and partial claims for splitting expensive items.","High","Feature","Done","giftlist-9ik"
"Database: Claims Schema","Create claims table with: id (text PK), item_id (FK to items), user_id (FK to users), amount (int nullable for partial claims), expires_at (timestamp nullable), created_at (timestamp). Add indexes on item_id, user_id, expires_at.","High","Improvement","Done","giftlist-9ik.1"
"Sync: Item Deletion Cascade","When item deleted: release all claims, notify claimers. Add to DELETE /api/items/[id] handler.","High","Improvement","Done","giftlist-9ik.10"
"Notifications: Claim Events","Per 08-notifications.mmd: RECIPIENT receives: item_claimed (by other), claim_released (available again) CLAIMER receives: claim_released_access_lost (removed from group, item deleted, owner joined, lost access) NEVER notify owner about claims. Notification types: claim_created, claim_released, claim_released_access_lost, item_deleted_claimed","Medium","Improvement","Done","giftlist-9ik.11"
"Background: Expiration Check","Scheduled task to: send reminders for claims expiring in 3 days, auto-release expired claims, notify users. Implement as Cloudflare Cron Trigger.","Medium","Improvement","Done","giftlist-9ik.12"
"UI: Partial Claim Dialog","When claiming item with price: option to claim full or partial amount, show remaining claimable amount, list existing partial claims.","Medium","Improvement","Done","giftlist-9ik.13"
"API: Partial Claim Validation","Track total claimed amount per item, reject if claim would exceed item price, allow multiple partial claims on same item.","Medium","Improvement","Done","giftlist-9ik.14"
"Research: FSM Libraries for Claim States","Research XState, Robot, and other FSM libraries for managing ClaimState transitions (unclaimed, partially_claimed, fully_claimed_by_me, fully_claimed_by_other, expiring_soon). Identify which components/hooks in the codebase would benefit from FSM approach. NOT a migration task - research only. Deliverable: Summary of library comparison, list of candidate components/hooks, recommendation.","Medium","Improvement","Done","giftlist-9ik.15"
"API: Claims CRUD","POST /api/claims (create claim with validation), GET /api/claims (user's claims), DELETE /api/claims/[id] (release own claim). Validate: user is recipient not owner, enforce first-come-first-served for full claims, auto-set 30-day expiration.","High","Improvement","Done","giftlist-9ik.2"
"API: Shared Items Claim Status","Modify /api/shared-items to include claim info for non-owners (hide from owners per visibility rules). Include claims array with user info and claimable_amount for partial claims.","High","Improvement","Backlog","giftlist-9ik.3"
"Hooks: useClaims","Create TanStack Query hooks: useCreateClaim(itemId, amount?), useReleaseClaim(claimId), useMyClaims(). Invalidate shared-items on mutations.","High","Improvement","Done","giftlist-9ik.4"
"UI: ClaimButton Component","Create ClaimButton with states: Unclaimed (Claim button), Partially claimed (Claim remaining), Fully claimed by me (Release Claim), Fully claimed by other (badge), Expiring soon (warning). Optimistic updates.","High","Improvement","Done","giftlist-9ik.5"
"UI: SharedItemCard Enhancement","Integrate ClaimButton into SharedItemCard. Show claim badges (hidden from owner), partial claim progress bar, expiration warnings.","High","Improvement","Done","giftlist-9ik.6"
"UI: My Claims Section","Add My Claims section to shared page showing items user has claimed with expiration dates and quick unclaim button.","Medium","Improvement","Done","giftlist-9ik.7"
"Sync: Release Claims on Access Loss","Release claims when: user removed/leaves group, group deleted, item untagged from group. Add to existing group/membership API handlers.","High","Improvement","Done","giftlist-9ik.8"
"Sync: Owner Joins Group","When owner joins a group where their items are tagged: untag items from that group, release any claims via that group, notify affected claimers. Add to invitation accept flow.","High","Improvement","Done","giftlist-9ik.9"
"Fix undefined claims in SharedItemCard","SharedItemCard.tsx:60 - claims may be undefined, needs null check. Discovered during giftlist-9ik.9 implementation.","High","Bug","Done","giftlist-9sx"
"Fix PWA share target blank page on Android","When sharing a link to the PWA on Android, the share page opens but displays blank/empty content.  ## Research Findings (Perplexity)  ### Likely Causes 1. **Relative URL in manifest** - Android may ignore relative paths like `/share` in share_target.action. Should use absolute URL. 2. **Service worker caching** - SW may serve stale/cached blank page on cold start after share 3. **React hydration issues** - Astro+React hydration can fail on cold starts, showing blank screen before JS loads 4. **N","High","Improvement","Done","giftlist-arw"
"Configure R2 CORS for image display","Images upload successfully but cannot be displayed - GET requests to R2 public URL fail (empty status). Need to configure CORS on R2 bucket to allow requests from localhost:4321 and production domain.","High","Bug","Done","giftlist-axb"
"Wishlist Page","Main page displaying user's items.  ## Steps - Create /wishlist route (protected) - Redirect to sign-in if not authenticated (use auth adapter) - Fetch items server-side in Astro - Pass items to React island for interactivity - Empty state component when no items - Add Item button in header or empty state  ## Files - src/pages/wishlist.astro (create) - src/components/WishlistPage.tsx (create - React island) - src/components/EmptyState.tsx (create)  ## Dependencies - Requires: App Layout & Naviga","Medium","Improvement","Done","giftlist-b03"
"Items API Endpoints","CRUD API for wishlist items.  ## Endpoints - GET /api/items - list current user's items - POST /api/items - create new item - PUT /api/items/[id] - update item (owner only) - DELETE /api/items/[id] - delete item (owner only)  ## Steps - Install zod for validation - All endpoints use auth adapter for user context - Return proper HTTP status codes and JSON responses  ## Files - src/pages/api/items/index.ts (create - GET, POST) - src/pages/api/items/[id].ts (create - PUT, DELETE) - src/lib/validati","High","Improvement","Done","giftlist-bcr"
"Fix metadata extractor for local dev environment","Error: Response body object should not be disturbed or locked at extractBody (node:internal/deps/undici/undici:5574:17). The HTMLRewriter API is Cloudflare Workers-only and fails in Node.js dev. Need fallback extraction method for local development.","High","Bug","Done","giftlist-bzo"
"Improve metadata extraction with fallback services","Improve metadata extraction with simple fallback:  1. **Direct fetch** (current) - Our server fetches URL, parse with cheerio/HTMLRewriter. Free, fast, works for most sites.  2. **Manual entry fallback** - If extraction fails (blocked, timeout, no metadata), open ItemFormDialog with just URL pre-filled. User enters details manually.  Flow: extractMetadata(url) → try direct → return result or {url} only on failure","Low","Improvement","Done","giftlist-c0b"
"Fix Vite outdated optimize dep errors","Console errors on /groups page: - ERR_ABORTED 504 (Outdated Optimize Dep) for @radix-ui deps - Failed to hydrate GroupsPage.tsx  Fix: Clear Vite cache and restart dev server rm -rf node_modules/.vite && npm run dev","Urgent","Bug","Done","giftlist-c2g"
"Fix React hydration and Clerk client-side initialization","## Problem Multiple issues preventing React components from hydrating properly:  1. **Date serialization hydration mismatch**: Drizzle returns Date objects for createdAt/updatedAt, but when Astro serializes props for React islands, dates become strings. This caused server/client mismatch and component crashes.  2. **createClerkAdapter not imported**: In src/lib/auth/index.ts, the function was re-exported but not imported for local use, causing ReferenceError.  3. **React useState null error**: `","High","Bug","Done","giftlist-cp4"
"Save Items While Browsing","Enable seamless item saving via Quick-add URL form and PWA Share Target. Users can paste URLs to auto-extract product info, or share directly from mobile apps.","Medium","Feature","Done","giftlist-cwy"
"Create URL metadata Zod validation schema","Create src/lib/validations/metadata.ts with Zod schema for URL input validation. Schema: { url: z.string().url().max(2048) }. Follow pattern from existing item.ts validations.","Medium","Improvement","Done","giftlist-cwy.1"
"Create minimal service worker for PWA installability","Create public/sw.js with minimal service worker required for PWA installability. Just handle install/activate events with skipWaiting/clients.claim. No caching - let network handle requests. This enables Add to Home Screen functionality.","Medium","Improvement","Done","giftlist-cwy.10"
"Add manifest link and SW registration to AppLayout","Modify src/layouts/AppLayout.astro to add in <head>: 1) <link rel='manifest' href='/manifest.json'>, 2) <meta name='theme-color' content='...'>, 3) <meta name='apple-mobile-web-app-capable' content='yes'>. Add script to register service worker: navigator.serviceWorker.register('/sw.js').","Medium","Improvement","Done","giftlist-cwy.11"
"Create /share page and SharePage component","Create src/pages/share.astro and src/components/SharePage.tsx. Page receives URL params ?url=...&title=...&text=... from share target. Flow: 1) If authenticated: extract metadata via API, show QuickAddForm pre-filled, 2) If not authenticated: store params in sessionStorage, redirect to sign-in, return to /share after auth. Handle edge case of multiple URLs in text param (parse first valid URL). Note: iOS doesn't support share targets - consider showing message for iOS users.","Medium","Improvement","Done","giftlist-cwy.12"
"Build HTMLRewriter metadata extractor","Create src/lib/metadata/extractor.ts using Cloudflare HTMLRewriter for streaming HTML parse. Extract in priority order: 1) schema.org/Product JSON-LD for price, 2) Open Graph tags (og:title, og:image, og:description), 3) Twitter Cards fallback, 4) HTML <title> and <meta description> last resort. Handle edge cases: JS-rendered content (return partial), timeouts (5s limit), non-HTML responses, redirect chains (follow up to 3).","Medium","Improvement","Done","giftlist-cwy.2"
"Create POST /api/extract-metadata endpoint","Create src/pages/api/extract-metadata.ts. POST endpoint that accepts { url: string }, validates with Zod, fetches URL server-side, uses HTMLRewriter extractor, returns { title, description, imageUrl, price (cents), siteName }. Security: block private IPs (SSRF prevention), 5s timeout, 5MB size limit. Follow auth pattern from existing items/index.ts.","Medium","Improvement","Done","giftlist-cwy.3"
"Create useMetadataExtract React Query hook","Create src/hooks/useMetadataExtract.ts with useMutation hook that calls POST /api/extract-metadata. Return { mutate, isPending, data, error }. Follow pattern from existing useItems hooks.","Medium","Improvement","Done","giftlist-cwy.4"
"Build QuickAddForm component","Create src/components/QuickAddForm.tsx. UI: 1) URL input with paste support, 2) 'Fetch' button calls useMetadataExtract, 3) Loading skeleton during fetch, 4) Pre-filled editable form showing extracted title/image/price/description, 5) 'Save' button creates item via existing POST /api/items. Use shadcn components, TailwindCSS, follow existing component patterns.","Medium","Improvement","Done","giftlist-cwy.5"
"Add defaultValues prop to ItemFormDialog","Modify src/components/ItemFormDialog.tsx to accept optional defaultValues prop for pre-filling form fields. Used by QuickAddForm to pass extracted metadata. Props: { name?, url?, price?, notes?, imageUrl? }.","Medium","Improvement","Done","giftlist-cwy.6"
"Integrate Quick Add button into WishlistPage","Modify src/components/WishlistPage.tsx to add 'Quick Add' button alongside existing 'Add Item' button. Opens QuickAddForm dialog. Include URL icon (Link icon from lucide-react).","Medium","Improvement","Done","giftlist-cwy.7"
"Create PWA manifest.json with share_target","Create public/manifest.json with: name 'GiftList', short_name, description, start_url '/wishlist', display 'standalone', theme/background colors, icons array (192/512), and share_target config: { action: '/share', method: 'GET', params: { url: 'url', title: 'title', text: 'text' } }.","Medium","Improvement","Done","giftlist-cwy.8"
"Create PWA icons for manifest","Create public/icons/ directory with: icon-192.png, icon-512.png (and optionally maskable variants). Generate from existing favicon.svg or create simple gift/list icon. Ensure icons meet PWA requirements (square, proper sizes).","Medium","Improvement","Done","giftlist-cwy.9"
"Use Drizzle inferred types in app","Replace manual types with Drizzle $inferSelect types from src/db/types.ts. Update components and API endpoints to use Item and User types.","Low","Improvement","Done","giftlist-dd8"
"Monitor Resend rate limits in production","Set up monitoring for Resend API usage. Free tier has limits - track and alert before hitting caps.","Low","Improvement","Backlog","giftlist-ecb"
"Add Resend DNS records (DKIM, SPF, DMARC)","In Resend Dashboard > Domains, add giftlist.app and configure required DNS records for deliverability.","High","Improvement","Done","giftlist-ecn"
"R2 Bucket Setup","Create R2 bucket and configure bindings.  ## Steps - Create R2 bucket: npx wrangler r2 bucket create giftlist-images - Enable public access in Cloudflare dashboard - Add R2 binding to wrangler.jsonc - Regenerate Worker types: npm run cf-typegen  ## Files - wrangler.jsonc (modify) - worker-configuration.d.ts (regenerate)","Medium","Improvement","Done","giftlist-ekd"
"Groups & Sharing","Enable users to share wishlist items with friends and family through groups and direct sharing. Includes groups, invitations, item recipients, and visibility rules.","High","Feature","Done","giftlist-g1m"
"Database: Groups & Members Schema","Add groups, group_members, invitations, and item_recipients tables to schema.ts. Create Drizzle migration and add inferred types.","High","Improvement","Done","giftlist-g1m.1"
"UI: Item Recipients Picker","Add recipients field to ItemFormDialog with multi-select for users and groups. Show recipients on ItemCard.","Medium","Improvement","Done","giftlist-g1m.10"
"UI: Shared Items View","Create /shared page showing items shared with user. Filter by group, display owner info.","Medium","Improvement","Done","giftlist-g1m.11"
"Visibility Enforcement","Update /api/items to only return owner's items. Validate recipient access on all item endpoints.","High","Improvement","Done","giftlist-g1m.12"
"API: Groups CRUD","Implement GET/POST /api/groups and GET/PUT/DELETE /api/groups/[id]. Add Zod validation schemas.","High","Improvement","Done","giftlist-g1m.2"
"API: Group Members","Implement GET /api/groups/[id]/members and DELETE /api/groups/[id]/members/[userId] for listing and removing members.","High","Improvement","Done","giftlist-g1m.3"
"API: Invitations","Implement invitation endpoints: POST /api/groups/[id]/invitations, GET /api/invitations, POST accept/decline, DELETE revoke.","High","Improvement","Done","giftlist-g1m.4"
"API: Item Recipients","Implement POST/DELETE/GET /api/items/[id]/recipients for tagging items with users or groups.","High","Improvement","Done","giftlist-g1m.5"
"API: Shared Items View","Implement GET /api/shared-items to list items shared with current user. Enforce visibility rules.","High","Improvement","Done","giftlist-g1m.6"
"UI: Groups Management Page","Create /groups page with GroupsPage island, GroupCard, CreateGroupDialog, and TanStack Query hooks.","Medium","Improvement","Done","giftlist-g1m.7"
"UI: Group Detail Page","Create /groups/[id] page showing members, invite button, remove/leave actions, edit name.","Medium","Improvement","Done","giftlist-g1m.8"
"UI: Invitations","Add pending invitations indicator in header with badge count. InvitationsDropdown with accept/decline buttons.","Medium","Improvement","Done","giftlist-g1m.9"
"Claims table missing from migrations","Claims schema was added to src/db/schema.ts but migration was never generated. Local D1 database had no claims table, causing 500 errors on /api/claims and /api/shared-items endpoints.","High","Bug","Done","giftlist-gd6"
"Clerk Integration","Implement Clerk adapter and integrate with Astro.  ## Steps - Install @clerk/astro - Add Clerk integration to astro.config.mjs - Create src/middleware.ts using auth adapter - Add environment variables to .env - Update src/env.d.ts with types - Enable SSR output mode  ## Environment Variables (.env) ``` PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_... CLERK_SECRET_KEY=sk_test_... ```  ## Files - astro.config.mjs (modify - add clerk(), output: 'server') - src/middleware.ts (create - uses auth adapter) - .","High","Improvement","Done","giftlist-hvy"
"App Layout & Navigation","Create authenticated app shell.  ## Steps - Modify existing src/layouts/Layout.astro or create new AppLayout - Add Header component (use Clerk components via adapter abstraction) - Add UserButton for profile/logout - Style navigation with TailwindCSS - Note: Clerk UI components used here; future auth swap may need UI updates  ## Files - src/layouts/AppLayout.astro (create) - src/components/Header.astro (create)  ## Dependencies - Requires: Clerk Integration","Medium","Improvement","Done","giftlist-jk8"
"Production Deployment","Tasks required before deploying to production: domain verification, secrets configuration, migrations, webhooks.","High","Feature","Done","giftlist-k7n"
"Verify giftlist.app domain in Resend","Add and verify giftlist.app domain in Resend dashboard to enable email sending from noreply@giftlist.app","High","Improvement","Done","giftlist-k7n.1"
"Configure Cloudflare secrets for production","Run wrangler secret put for: - CLERK_SECRET_KEY - CLERK_WEBHOOK_SECRET   - RESEND_API_KEY","High","Improvement","Done","giftlist-k7n.2"
"Theme Customization - Gruvbox Dark/Light","Customize app theme to use Gruvbox color palette with animated dark/light mode switcher.  ## Problem App looked like a typical shadcn app with default styling.  ## Solution Implemented Gruvbox color theme (warm, retro palette) with: - Dark mode: earthy warm tones (oklch color space) - Light mode: warm cream palette - Animated Sun/Moon toggle in header  ## Key Implementation Details  ### CSS Variables (src/styles/global.css) - Used oklch color space for perceptually uniform colors - :root defines","Medium","Improvement","Done","giftlist-l24"
"Configure Clerk webhook for production","In Clerk Dashboard: 1. Go to Webhooks section 2. Add endpoint URL: https://yourdomain.com/api/webhooks/clerk 3. Select events: user.created, user.updated, user.deleted 4. Copy signing secret 5. Run: wrangler secret put CLERK_WEBHOOK_SECRET","Medium","Improvement","Done","giftlist-mig"
"Auth Adapter Pattern","Create abstraction layer for authentication to enable future provider swaps.  ## Interface Design ```typescript // src/lib/auth/types.ts interface AuthUser {   id: string           // Our internal user ID   providerId: string   // Provider's user ID (e.g., Clerk ID)   email: string   name: string | null   avatarUrl: string | null }  interface AuthAdapter {   // Server-side   getCurrentUser(request: Request, locals: App.Locals): Promise<AuthUser | null>   getUserById(providerId: string): Promise<","High","Improvement","Done","giftlist-naz"
"Improve Header mobile responsiveness","Header has issues on mobile:  **Current problems:** 1. Nav links hidden on mobile (md:flex) but no hamburger menu to access them 2. Right section has 5+ items (language, theme, invitations, notifications, user) - overflows on small screens 3. Gap-4 spacing too wide on mobile  **Proposed solution:** 1. Add hamburger menu for mobile nav (Sheet component from shadcn) 2. Group some icons into dropdown or hide on mobile (e.g., language switcher in menu) 3. Reduce gap on mobile: gap-2 sm:gap-4 4. Cons","Medium","Improvement","Done","giftlist-omp"
"Add idempotency check for Clerk webhook handler","Implement event ID tracking to prevent duplicate processing on webhook retries. Store processed event IDs and check before handling.","Medium","Improvement","Backlog","giftlist-pe9"
"Fix invalid image URL validation on item save","Adding/updating items fails with 'invalid image URL' error. Likely the Zod validation schema expects full URL but now receiving /api/images/{key} relative path.","High","Bug","Done","giftlist-q3k"
"Set up billing alerts and monitor free tier limits","Configure alerts to avoid unexpected charges:  **Google Cloud (OAuth):** - OAuth API is free (no direct cost) - Set $0 budget alert: Billing → Budgets & alerts  **Cloudflare Workers (Free tier):** - 100,000 requests/day - 10ms CPU time/request - Monitor in CF dashboard  **Clerk (Free tier):** - 10,000 MAUs/month - Monitor in Clerk dashboard → Billing  **Resend (Free tier):** - 3,000 emails/month - Monitor in Resend dashboard  **Domain (goodieslist.com):** - One-time cost already paid","Medium","Improvement","Backlog","giftlist-tsm"
"Image Upload","Add R2 image storage for wishlist item photos. Users can upload images for items, stored in Cloudflare R2 and served via public URL.","Medium","Feature","Done","giftlist-ttm"
"Test email deliverability after domain verification","Send test emails to verify they don't land in spam. Check DKIM/SPF headers in received emails.","Medium","Improvement","Done","giftlist-u8o"
"Users can see other users' groups they're not members of","When user A shares an item with user B through a group, user B can see user A's other groups in their groups list - groups they are not actually a member of.  **Expected behavior:** User should only see groups they are a member of (created or invited to).  **Actual behavior:** User sees groups from other users who shared items with them.  **Likely cause:** Groups query is joining through items/shares instead of filtering by membership only.  **Files to investigate:** - src/hooks/useGroups.ts - s","High","Bug","Done","giftlist-uxi"
"Configure Resend API key and domain","Setup steps for email functionality: 1. Create Resend account and get API key 2. Run: wrangler secret put RESEND_API_KEY --local (for dev) 3. Run: wrangler secret put RESEND_API_KEY (for prod) 4. Verify domain in Resend dashboard 5. Update DEFAULT_FROM in src/lib/email.ts:46 with verified domain","High","Improvement","Done","giftlist-vbl"
"Database Migration","Generate and apply migrations to D1.  ## Steps - Run npx drizzle-kit generate to create SQL migration files - Apply to local D1: npx wrangler d1 migrations apply giftlist-db --local - Verify tables created with wrangler d1 execute  ## Files - drizzle/ directory (generated migrations)  ## Dependencies - Requires: Database Foundation task","High","Improvement","Done","giftlist-vfk"
"Integrate Upload with Item Form","Add ImageUpload to ItemFormDialog.  ## Steps - Add ImageUpload component to dialog - On successful upload, set imageUrl field - Show current image when editing existing item - Allow removing/replacing image  ## Files - src/components/ItemFormDialog.tsx (modify)  ## Dependencies - Requires: ImageUpload Component","Medium","Improvement","Done","giftlist-w63"
"ImageUpload Component","React component for image upload with drag-and-drop.  ## Steps - Create ImageUpload.tsx with drag-and-drop + click to select - Show preview before upload - Loading state during upload - Error handling (file too large, wrong type) - shadcn styling  ## Files - src/components/ImageUpload.tsx (create)  ## Dependencies - Requires: Image Upload API","Medium","Improvement","Done","giftlist-wx3"
"Item Card Component","Display individual wishlist items.  ## Steps - Add shadcn Card component: npx shadcn@latest add card - Show: name, price (formatted), external link, notes preview - Image placeholder (gray box, no upload yet) - Edit and Delete action buttons (icons) - Hover states and responsive design  ## Files - src/components/ui/card.tsx (add via shadcn) - src/components/ItemCard.tsx (create)  ## Dependencies - Requires: Wishlist Page","Medium","Improvement","Done","giftlist-y6h"
"Typography & Spacing Design System","Implemented custom design system with Inter Variable font, spacing tokens, and radius scale.  ## Font Setup - Package: @fontsource-variable/inter (self-hosted, no external CDN) - Import: src/styles/global.css - Font features enabled: cv11 (single-story 'a'), ss01 (alternate digits) - Font smoothing: antialiased for crisp rendering  ## Typography Tokens (Tailwind v4 @theme inline) | Token | Value | Use | |-------|-------|-----| | --tracking-tighter | -0.03em | Large display headings | | --trackin","Medium","Improvement","Done","giftlist-ya1"
"Fix missing @/paraglide/runtime module import","Build error: Cannot find module '@/paraglide/runtime' imported from '/Users/alex/Documents/giftlist/src/i18n/LocaleContext.tsx'. The paraglide runtime needs to be generated or the import path corrected.","Urgent","Bug","Done","giftlist-zl0"
