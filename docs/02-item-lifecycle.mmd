---
title: Item Lifecycle
---
stateDiagram-v2
    [*] --> Active: add(owner, item, details)

    state Active {
        Private --> Shared: tag with recipient
        Shared --> Private: remove all tags
        Shared --> Claimed: recipient claims
        Claimed --> Shared: claimer unclaims
        Claimed --> Shared: claimer loses access
    }

    Active --> Active: update details
    Active --> Received: owner marks received
    Active --> Archived: owner archives (no claims)
    Active --> [*]: remove

    Received --> Archived: owner archives
    Received --> Active: owner restores

    Archived --> Active: owner restores

    note right of Active
        Default state for new items
        Sub-states track sharing/claiming
        Recipients can see and claim
    end note

    note right of Received
        Owner confirmed receipt
        Recipients see "Gifted" badge
        Claimers notified of receipt
    end note

    note right of Archived
        Hidden from recipients
        Only owner can see (archive view)
        Can be restored to Active
    end note

    note left of Private
        Only owner can see
        Not shared with anyone
    end note

    note left of Shared
        Tagged with recipients
        Available for claiming
    end note

    note left of Claimed
        Locked by claimer
        Hidden from owner
        Visible to other recipients
    end note
