---
import AppLayout from "@/layouts/AppLayout.astro";
import { getLocale, isLocale } from "@/paraglide/runtime";
import * as m from "@/paraglide/messages";
import { HeroSection } from "@/components/HeroSection";
import { LandingFeatures } from "@/components/LandingFeatures";

// Extract locale from URL path
const pathSegments = Astro.url.pathname.split("/").filter(Boolean);
const firstSegment = pathSegments[0];

// Validate locale - redirect invalid locales to base locale
if (firstSegment && !isLocale(firstSegment) && firstSegment !== "") {
	// Invalid path that doesn't match a locale - this shouldn't happen with proper routing
	return Astro.redirect("/");
}

const locale = getLocale();
---

<AppLayout title={`${m.common_appName()} - ${m.landing_heroTitle()}`} locale={locale}>
	<HeroSection client:load />
	<div id="how-it-works">
		<LandingFeatures client:load />
	</div>
</AppLayout>
